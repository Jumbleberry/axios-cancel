!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("axios")):"function"==typeof define&&define.amd?define(["axios"],t):"object"==typeof exports?exports.axiosCancel=t(require("axios")):e.axiosCancel=t(e.axios)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={exports:{},id:o,loaded:!1};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var o={debug:!1},a=(0,p.default)({},o,n),s=new c.default(a),r=new u.default(a);t&&t.mixin(d.default),e.interceptors.request.use(function(e){var t=e.requestId,n=e.context;if("get"!==e.method)return e;n&&!t&&(e.requestId=t="auto-generated-id-"+Math.floor(1e8*Math.random()));var o=null;if(t&&r.isCacheable(e)&&(o=r.getResponse(t),null!==o&&(e.adapter=function(){return Promise.resolve({data:o,status:e.status,statusText:e.statusText,headers:e.headers,config:Object.assign({__cached:!0},e),request:e})})),null!==o){h("onRequestStart",{config:e,payload:e});var a=i.CancelToken.source();e.cancelToken=a.token,s.addRequest(t,n,a.cancel)}return e}),e.interceptors.response.use(function(e){var t=e.config,n=t.requestId,o=t.context,a=t.__cached;return n&&!a&&(s.removeRequest(n,o),r.isValidResponse(e)&&r.addResponse(n,e),h("onRequestComplete",{config:e.config,payload:e})),e}),e.cancel=function(e,t){e&&s.cancelRequest(e,t)},e.cancelAll=function(e){s.cancelAllRequests(e)},e.clearCache=function(e){r.removeResponse(e)},e.clearAllCache=function(e){s.cancelAllRequests(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=n(5),s=n(2),c=o(s),r=n(1),u=o(r),l=n(3),p=o(l),f=n(4),d=o(f),h=function(e,t){var n=t.config,o=t.payload;n.hasOwnProperty(e)&&"function"==typeof n[e]&&n[e](o)}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(){function e(t){n(this,e),this.options=Object.assign({cache_prefix:"axios-cache-",default_ttl:3e5},t)}return o(e,[{key:"log",value:function(e){this.options.debug===!0&&console.log(e)}},{key:"getCacheKey",value:function(e){return this.options.cache_prefix+e}},{key:"isValidResponse",value:function(e){return e.cached_until>Date.now()||(this.log("CACHE: response expired at '"+e.cached_until+"'"),!1)}},{key:"addResponse",value:function(e,t){this.log("CACHE: adding response '"+e+"'");var n=this.options.default_ttl;void 0!==t.config.__cache_ttl&&(n=t.config.__cache_ttl);var o={cached_until:0===n?Date.now()+31536e6:Date.now()+n,cached_data:JSON.parse(JSON.stringify(t.data))};localStorage.setItem(this.getCacheKey(e),JSON.stringify(o))}},{key:"removeResponse",value:function(e){this.log("CACHE: removing response '"+e+"'"),localStorage.removeItem(this.getCacheKey(e))}},{key:"getResponse",value:function(e){this.log("CACHE: check response existence '"+e+"'");var t=JSON.parse(localStorage.getItem(this.getCacheKey(e)));return null===t?(this.log("CACHE: response doesn't exists '"+e+"'"),null):this.isValidResponse(t)?(this.log("CACHE: response found '"+e+"'"),this.log("CACHE: response valid until '"+t.cached_until+"'"),t.cached_data):(this.log("CACHE: response expired at '"+t.cached_until+"'"),this.removeResponse(e),null)}},{key:"isCacheable",value:function(e){return null!==e.__cache_ttl&&e.__cache_ttl>-1}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.options=t,this.pendingRequests={},this.contextMapping={}}return o(e,[{key:"addRequest",value:function(e,t,n){this.log("CANCELLATION: adding request `"+e+"`"),this.has(e)&&this.cancelRequest(e,"`cancelRequest("+e+")` from `RequestManager.addRequest`.\n      Found duplicate pending request."),this.addToMapping(e,t),this.pendingRequests[e]={cancel:n,context:t}}},{key:"removeRequest",value:function(e,t){this.log("CANCELLATION: removing request `"+e+"`"),this.removeFromMapping(e,t),delete this.pendingRequests[e]}},{key:"cancelRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"`cancelRequest("+e+")` from `RequestManager.cancelRequest`";this.has(e)&&"function"==typeof this.pendingRequests[e].cancel?(this.log("CANCELLATION: cancelling request `"+e+"`"),this.pendingRequests[e].cancel(t),this.removeRequest(e,this.pendingRequests[e].context),this.log("CANCELLATION: request `"+e+"` cancelled")):this.contextMapping[e]&&this.cancelContextMapping(e,t)}},{key:"cancelAllRequests",value:function(e){this.contextMapping={};for(var t in this.pendingRequests){var n=e||"`cancelRequest("+t+")` from `RequestManager.cancelAllRequests`";this.cancelRequest(t,n)}}},{key:"cancelContextMapping",value:function(e,t){var n=this.contextMapping[e];delete this.contextMapping[e];for(var o in n){var a=t||"`cancelContextMapping("+e+")` from `RequestManager.cancelContextMapping`";this.cancelRequest(n[o],a)}}},{key:"has",value:function(e){return!!this.pendingRequests[e]}},{key:"log",value:function(e){this.options.debug===!0&&console.log(e)}},{key:"addToMapping",value:function(e,t){void 0!==t&&(void 0===this.contextMapping[t]&&(this.contextMapping[t]=[]),this.contextMapping[t].push(e))}},{key:"removeFromMapping",value:function(e,t){if(void 0!==t&&void 0!==this.contextMapping[t]){var n=this.contextMapping[t].indexOf(e);n>-1&&this.contextMapping[t].splice(n,1)}}}]),e}();t.default=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e={};for(var t in arguments){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={beforeDestroy:function(){this.hasOwnProperty("$http")&&this.$http.cancel(this._uid)}}},function(t,n){t.exports=e}])});